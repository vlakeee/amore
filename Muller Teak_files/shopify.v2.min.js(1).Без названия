var SPRCallbacks={};if(SPRCallbacks={onProductLoad:function(e){},onReviewsLoad:function(e){StampedFn.createAllWidgets(!0)},onFormSuccess:function(e){null!=document.getElementById("link-write-questions")&&(document.getElementById("link-write-questions").style.display=null)}},void 0===StampedFn)var StampedFn=function(y,C){"use strict";var e,t,r="",n=!1,x=!1,a=0,v=!1;function i(){var e,s=[],o=!1,t=$("#shopify-product-reviews");t.length&&(e=t.data("id"),$(".spr-review",t).each(function(e,t){var a=$("#stamped-review-image",t);(o=0<a.length)||(a=$("#stamped-review-options",t),(o=0<a.length)&&$(".spr-review-header-title",this).prependTo($(".spr-review-content",this)));var i=a.data("author"),r=$(this).attr("id").replace("spr-review-",""),n={author:i,timestamp:m(t),reviewId:r};s.push(n)}),1==o&&u(e,s))}function s(){var e=$("#shopify-product-reviews");if(e.length){if(!n){e.append('<style>.spr-reviews[data-type="questions"] .spr-review-content-body { margin-top:15px !important; }</style>')}l(1,e.data("id"))}}function o(){var c,h,u,m,f,e=$("#shopify-product-reviews"),t=$("#stamped-review-share");if(e.length&&t.length){if(!n){$("head").append("<style>.spr-review-reply {clear:both; }.spr-review-reportreview {float:right; display:none;} #stamped-share-wrapper{margin-bottom:15px;font-size:11px;float:left;line-height:16px;} .stamped-thumbs-up,.stamped-thumbs-down { cursor:pointer; } .stamped-share-button { cursor:pointer; }.stamped-share-links a { color:blue; text-decoration:none;}</style>")}e.data("id"),(c=y.location.href)&&(c+=-1<c.indexOf("?")?"%26":"?",c+="ref=stampedio"),$(".spr-reviews:first .spr-review",e).each(function(e,t){var a=$(".spr-review-content",t);if(a.length){if($("#stamped-share-wrapper",t).length)return;var i=$(".spr-icon-star",t).length;(h=$(t).attr("id"))&&(h=h.replace("spr-review-","")),f=F("★",i),u=$(".spr-review-header-title",t).html(),(m=$(".spr-review-content-body",t).html())&&(m=(m=(m=m.replace("<br>","")).replace("</br>","")).substr(0,100),m=encodeURIComponent(m));var r=$('<div id="stamped-share-wrapper">'),n=$('<a class="stamped-share-button"><i class="fa fa-share-alt"></i> Share</a>'),s=$('<span id="stamped-share-links" class="stamped-share-links">'),o=" &nbsp;.&nbsp; ",p='<a href="https://www.facebook.com/dialog/feed?app_id=222664514734026&caption='+f+"&description="+m+"&display=popup&link="+c+"&name="+u+"&redirect_uri=https://stamped.io/shares?review_id="+h+'" target="_blank">Facebook</a>',d='<a href="https://twitter.com/intent/tweet?text='+m+"&url="+c+'" target="_blank">Twitter</a>',l='<a href="https://plus.google.com/share?url='+c+'" target="_blank">Google</a>';s.append(p),s.append(o),s.append(d),s.append(o),s.append(l),r.append(n),r.append(" &nbsp; | &nbsp;&nbsp;"),r.append(s.hide()),a.after(r),$(r).on("click",".stamped-share-button",function(){$(this).parent().find(".stamped-share-links").fadeToggle()})}})}}function w(e){var t=$("#shopify-product-reviews"+(e?" "+e:""));if(t.length){var a=$(".spr-review #stamped-review-avatar",t);if(a.length){if(!n){$("head").append("<style>#stamped-review-avatar { float: left; position: absolute; height: 60px; width: 60px; background: #eee; } #stamped-review-avatar img { width:100% !important; } .spr-review-header-byline { opacity: 1 !important; } .spr-review-header {display: table; width: 100%; height: 90px; } .spr-review-header .author { margin-right:5px; } .spr-review-header .author, .spr-review-header .spr-starratings .spr-icon:first-child, .spr-review-header-byline > strong { margin-left:70px; } .spr-review-header-byline { width:100%; } .spr-review-header-title {display: table-footer-group !important; } .spr-review-header-byline {display: table-header-group !important; }</style>")}if(r){var i=$('<img src="'+r+'">');a.html(i)}else $.ajax({type:"GET",url:"//stamped.io/api/reviews/avatarImage",crossDomain:!0,data:{shop:Shopify.shop},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(e){var t=$('<img src="'+(r=e)+'">');a.html(t)}}})}}}function p(){var e=$("#shopify-product-reviews");e.length&&$(".spr-review",e).each(function(e,t){$(".spr-review-header-title",this).prependTo($(".spr-review-content",this))})}function d(){setTimeout(function(){$(".spr-badge-caption").length&&$(".spr-badge-caption").each(function(e){var t=$(this).text(),a=$("<a/>");a.attr("href","#shopify-product-reviews"),a.text(t),$(this).html(a)})},3e3)}function l(m,e){var f=$("#stamped-qna-widget"),g=f.data("take")||5;$("#stamped-main-widget").length&&$.ajax({type:"GET",url:"//stamped.io/api/questions",crossDomain:!0,data:{shop:Shopify.shop,productId:e,page:m,take:g},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(1==e.a){var t,a,i;t=e.results,a=e.t,i=e.form,e.p,function(e){if(!$(".stamped-tabs").length){$(".spr-summary-actions-newreview").attr("id","link-write-review").attr("onclick",'StampedFn.toggleForm("review");return false'),$(".spr-summary-actions").prepend('<a href="#" id="link-write-questions" class="spr-summary-actions-newreview" onclick="StampedFn.toggleForm();return false"></a>');var t=$('[itemprop="votes"]').attr("content")||"0",a=$('<ul class="stamped-tabs">'),i=$('<li id="tab-reviews" class="active" data-type="reviews">Reviews ('+t+")</li>").on("click",b),r=$('<li id="tab-questions" data-type="questions">Questions ('+e+")</li>").on("click",b);a.append(i).append(r);var n=$('<div class="stamped-tab-container">').append(a);$(".spr-content").prepend(n)}}(a),function(e){if(!$('.spr-reviews[data-type="questions"]').length){$("#shopify-product-reviews").prepend("<style>.spr-reviews[data-type='questions'] #stamped-review-avatar { position:inherit !important; } .spr-reviews[data-type='questions'] .spr-review-header .author { margin-left:15px; } .stamped-tab-container {margin-top: 20px; } ul.stamped-tabs { margin-left:0; margin-bottom:-24px; } ul.stamped-tabs li { display:inline-block; margin-right:15px; margin-bottom:0; padding-bottom: 3px; cursor:pointer; } ul.stamped-tabs li.active { border-bottom:3px solid #000; } .spr-review-content { display:block; } .spr-review-header-dateline {float:right; color:#a2a2a2; font-size:12px;} .spr-icon-comment { color:#a2a2a2; margin-top:10px; } .spr-summary-actions-newreview { display:block; } </style>"),$("#shopify-product-reviews").append('<style>@media screen and (max-width: 590px) { .spr-summary-actions { float:none !important; margin-top:5px; } } .spr-summary-actions { float:right; } .spr-summary-actions-newreview { border: 1px solid; padding: 5px 10px; margin-left: 10px; } .spr-summary-actions-newreview#link-write-review:before { content: "\\f044 "; font-family: FontAwesome; font-style: normal; font-weight: normal; text-decoration: inherit; padding-right: 3px; display: inline-block; } .spr-summary-actions-newreview#link-write-questions:before { content: "\\f0e6 "; font-family: FontAwesome; font-style: normal; font-weight: normal; text-decoration: inherit; padding-right: 3px; display: inline-block; } .spr-summary-actions-newreview#link-write-questions:after { content:"Ask a Question"; display: inline-block; }</style>'),$(".spr-reviews").attr("data-type","reviews"),$(".spr-form").attr("data-type","reviews");var t=$('<div class="spr-reviews">').attr("data-type","questions").hide();$(".spr-content").append(t);var a=$('<div class="spr-form" style="" data-type="questions">').hide().html(e);$(".spr-form").before(a),v&&(b(null,"questions"),k("#shopify-product-reviews"))}}(i);var r=$('.spr-reviews[data-type="questions"]');r.html("");for(var n=0;n<t.length;n++){var s=t[n],o=$('<div class="spr-review" id="'+s.guid+'"></div>'),p=$('<div class="spr-review-header">'),d=$('<div class="spr-review-content">'),l=$('<div class="spr-review-footer">');s.title&&r.append($('<h3 class="spr-review-content-title" id="'+s.guid+'">').html(""+s.title)),p.append($('<span class="spr-review-header-byline">').html('<strong class="author">'+s.name+"</strong>").prepend($('<div id="stamped-review-avatar">')).append($('<span class="spr-review-header-dateline">').html(t[n].date))),d.append($('<p class="spr-review-content-body">').html("Q: "+(s.message||s.title)+'<div class="spr-icon-comment"><i class="fa fa-comment"></i> Answers ('+s.answersList.length+")</div>")),o.append(p).append(d);for(var c=0;c<s.answersList.length;c++){var h=s.answersList[c],u=$('<div class="spr-review-reply">');u.append($('<span class="spr-review-header-byline">').html(h.name).append($('<span class="spr-review-header-dateline">').html(h.date))),u.append($('<p class="spr-review-reply-body">').html("A: "+h.message)),o.append(u)}o.append(l),r.append(o)}if(w('.spr-reviews[data-type="questions"]'),function(e,t,a){var i=0<e?e/a<1?1:Math.round(e/a):1;if(1==i)return;var r='<div class="spr-pagination" id="spr-pagination-question"><div><span id="spr-pagination-prev" class="spr-pagination-prev"><a href="#shopify-product-reviews" onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+(t-1)+'">&laquo; Previous</a></span><span id="pages"></span><span id="spr-pagination-next" class="spr-pagination-next"><a href="#shopify-product-reviews" onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+(t+1)+'">Next &raquo;</a></span></div></div>',n=$('.spr-reviews[data-type="questions"]'),s=$(".spr-pagination",n);s.length?s.replaceWith(r):n.append(r);s=$(".spr-pagination",n);var e=i,t=t,o=[];if(o.push(1),e<=7){for(var p=2;p<e;p++)o.push(p);e==t&&o.push(t)}if(8<=e){var d=t-2;1<=d&&(t-2!=1&&o.push(t-2),o.push(t-1)),1!=t&&o.push(t);var l=t+2;l<=e&&(o.push(t+1),l!=e&&o.push(t+2))}1==t||1==t?$("#spr-pagination-prev",s).hide():$("#spr-pagination-prev",s).show();e==t||1==e?$("#spr-pagination-next",s).hide():$("#spr-pagination-next",s).show();e!=t&&o.push(e);for(var p=0;p<o.length;p++){var c=o[p]==t;c?$("#pages",s).append(' <span class="spr-pagination-page is-active">'+o[p]+"</span> "):$("#pages",s).append(' <span class="spr-pagination-page"><a href="#shopify-product-reviews" onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+o[p]+'">'+o[p]+"</a></span> "),1==o[p]&&7<e&&5<=t&&$("#pages",s).append(' <span class="spr-pagination-deco">&hellip;</span>'),p==o.length-2&&t+2<e&&$("#pages",s).append(' <span class="spr-pagination-deco">&hellip;</span>')}}(a,m,g),f.length)r.show(),r.appendTo(f),$('.spr-form[data-type="questions"]').prependTo(f),$('<div style="clear:both;"></div>').prependTo(f),$("#link-write-questions").prependTo(f),$("#shopify-product-reviews").append("<style>.stamped-tab-container { display:none !important; }</style>"),1!=m&&k("#stamped-qna-widget");$(C).trigger("stamped:qna:loaded")}}})}function u(e,t){if(!x){x=!0;var b=$("#shopify-product-reviews");$.ajax({type:"POST",url:"//stamped.io/api/reviews/ImagesAndVotes?shop="+Shopify.shop+"&productId="+e,data:{reviews:t},success:function(e){for(var t=0,a=(e=e.reviews).length;t<a;t++){var i=e[t];if(i.reviewImageUrl){var r=i.reviewImageUrl.split(","),n="",s=$('[itemprop="itemreviewed"]',b);if(s.length&&(n=s.attr("content")),!(w=$(".spr-review").find('#stamped-review-image[data-date="'+i.timestamp+'"][data-author="'+i.author+'"]').closest(".spr-review").find(".spr-review-content")).find("#stamped-review-photos").length){for(var o=$('<div id="stamped-review-photos">'),p=0,d=r.length;p<d;p++){var l="//s3-us-west-2.amazonaws.com/stamped.io/uploads/photos/"+r[p],c=C.createElement("img");c.setAttribute("src",l),c.setAttribute("height","auto"),c.setAttribute("width","20%"),n&&c.setAttribute("alt",n),c.setAttribute("align","left"),c.setAttribute("style","margin-right:10px;");var h=$('<a href="'+l+'" data-featherlight="image"></a>');$(h).append(c),$(o).append(h)}$(w).prepend(o)}}if(i.reviewId){var u=$('.spr-review[id="spr-review-'+i.reviewId+'"]');u.length&&($("#stamped-rating-wrapper .stamped-thumbs-up .fa",u).html("&nbsp;"+i.voteUp),$("#stamped-rating-wrapper .stamped-thumbs-down .fa",u).html("&nbsp;"+i.voteDown),"1"==i.verifiedType&&($(".spr-review-header-byline .verified",u).show(),$(".spr-review-header-byline .verified",u).css({display:""})))}if(i.reviewOptionsList){for(var m=$(".spr-review").find('#stamped-review-options[data-date="'+i.timestamp+'"][data-author="'+i.author+'"]'),f=m.attr("data-position"),g='<ul id="stamped-review-options">',v=0;v<i.reviewOptionsList.length;v++)i.reviewOptionsList[v]&&(g+='<li><span class="message"><strong>'+i.reviewOptionsList[v].message+':</strong></span> <span class="value">'+i.reviewOptionsList[v].value+"</span></li>");var w;if(g+="</ul>",!(w=m.closest(".spr-review").find(".spr-review-content")).find("#stamped-review-options").length)if(f&&"top"!=f){if("bottom"==f)$(w).append($(g));else if("middle"==f){var y=m.closest(".spr-review").find(".spr-review-content").find(".spr-review-header-title");$(w).after($(y))}}else $(w).prepend($(g))}x=!1}},error:function(e){x=!1}})}}function b(e,t){$(".stamped-tabs #tab-reviews").removeClass("active"),$(".stamped-tabs #tab-questions").removeClass("active"),"questions"==t&&$(".stamped-tabs #tab-questions").addClass("active"),e&&($(this).addClass("active"),t=$(this).data("type")),"reviews"==t?($('.spr-reviews[data-type="reviews"]').show(),$('.spr-reviews[data-type="questions"]').hide()):"questions"==t&&($('.spr-reviews[data-type="reviews"]').hide(),$('.spr-reviews[data-type="questions"]').show()),$('.spr-form[data-type="reviews"]').hide(),$('.spr-form[data-type="questions"]').hide()}function m(e){var t,a=$("#stamped-review-vote",e),i=$("#stamped-review-image",e),r=$("#stamped-review-options",e);if(i.length&&(t=i.data("date")),a.length&&isNaN(a.data("date"))&&a.attr("data-date")&&(t=a.data("date")),r.length&&isNaN(r.data("date"))&&r.attr("data-date")&&(t=r.data("date")),isNaN(t)&&t){var n=t.replace(" ","T").replace(" ",""),s=n.substring(n.length-2,n.length);n=(n=n.substring(0,n.length-2))+":"+s;var o=new Date(n).toUTCString(),p=Math.round(new Date(o).getTime()/1e3);return a.attr("data-date",p),i.attr("data-date",p),r.attr("data-date",p),p}return t}e=void 0!==y?y:this,t=function(){function a(e){return e instanceof Date?e:isNaN(e)?/^\d+$/.test(e)?new Date(s(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e)):new Date(s(e))}function s(e){return parseInt(e)}function p(e,t,a){t=l[t]?t:l[a]?a:"en";for(var i=0,r=e<0?1:0,n=e=Math.abs(e);c[i]<=e&&i<6;i++)e/=c[i];return(0===(i*=2)?9:1)<(e=s(e))&&(i+=1),l[t](e,i,n)[r].replace("%s",e)}function d(e,t){return((t=t?a(t):new Date)-a(e))/1e3}function n(e,t){return e.getAttribute?e.getAttribute(t):e.attr?e.attr(t):void 0}function i(e,t){this.nowDate=e,this.defaultLocale=t||"en"}function e(e,t){return new i(e,t)}var r="second_minute_hour_day_week_month_month".split("_"),o="秒_分钟_小时_天_周_月_年".split("_"),l={en:function(e,t){if(0===t)return["just now","right now"];var a=r[parseInt(t/2)];return 1<e&&(a+="s"),[e+" "+a+" ago","in "+e+" "+a]},zh_CN:function(e,t){if(0===t)return["刚刚","片刻后"];var a=o[parseInt(t/2)];return[e+a+"前",e+a+"后"]}},c=[60,60,24,7,365/7/12,1],h="datetime",u="data-tid",m={};return i.prototype.doRender=function(e,t,a){var i,r,n,s=d(t,this.nowDate),o=this;e.innerHTML=p(s,a,this.defaultLocale),m[i=setTimeout(function(){o.doRender(e,t,a),delete m[i]},Math.min(1e3*function(e){for(var t=1,a=0,i=Math.abs(e);c[a]<=e&&a<6;a++)e/=c[a],t*=c[a];return i=(i%=t)?t-i:t,Math.ceil(i)}(s),2147483647))]=0,n=i,(r=e).setAttribute?r.setAttribute(u,n):r.attr&&r.attr(u,n)},i.prototype.format=function(e,t){return p(d(e,this.nowDate),t,this.defaultLocale)},i.prototype.render=function(e,t){void 0===e.length&&(e=[e]);for(var a=0,i=e.length;a<i;a++)this.doRender(e[a],(r=e[a]).dataset.timeago?r.dataset.timeago:n(r,h),t);var r},i.prototype.setLocale=function(e){this.defaultLocale=e},e.register=function(e,t){l[e]=t},e.cancel=function(e){var t;if(e)(t=n(e,u))&&(clearTimeout(t),delete m[t]);else{for(t in m)clearTimeout(t);m={}}},e},"object"==typeof module&&module.exports?(module.exports=t(),module.exports.default=module.exports):e.timeago=t();function F(e,t){for(var a=[],i=0;i<t;)a[i++]=e;return a.join("")}function k(e){var t=jQuery("html, body"),a=jQuery(e);t.animate({scrollTop:a.offset().top-1},500)}function c(e,p,t){var d=$(p),l=d.data("widget-type"),c=d.data("widget-persist-data")||!1,a=d.data("review-id"),i=d.data("review-ids")?d.data("review-ids").toString().split(","):null,r=d.data("product-id"),n=d.data("product-ids")?d.data("product-ids").toString().split(","):null,s=d.data("product-category"),o=d.data("product-brand"),h=d.data("limit-words"),u=d.data("random"),m=d.data("show-avatar"),f=d.data("take"),g=d.data("fill-empty"),v=d.data("min-rating"),w=d.data("with-photos");$.ajax({type:"GET",url:e+"?"+$.param(function(e){for(var t in e)null!==e[t]&&""!==e[t]&&void 0!==e[t]||delete e[t];return e}({type:l,reviewId:a,reviewIds:i,productId:r,productIds:n,productCategory:s,productBrand:o,limitWords:h,random:u,shop:Shopify.shop,showAvatar:m,isFillEmpty:g,page:t,skip:f,minRating:v,isWithPhotos:w})),dataType:"json",success:function(e,t,a){if(e){var i=e.template;if("instagram-feed"!=l&&"visual-gallery"!=l&&1!=c&&$(d).html(""),"single"==l)d.append(i),StampedWidgetSingleFn,StampedWidgetSingleFn.init(e.data,d,$);else if("full-page"==l){var r=d.attr("data-rich-snippet"),n="/"==location.pathname;if(0<e.total&&"true"==r&&!n){var s={"@context":"http://schema.org","@type":"Product",name:e.shop,aggregateRating:{"@type":"AggregateRating",ratingValue:e.rating,reviewCount:e.total}},o=C.createElement("script");o.type="application/ld+json",o.innerHTML=JSON.stringify(s),C.getElementsByTagName("head")[0].appendChild(o)}d.append(i),StampedWidgetFullPageFn,StampedWidgetFullPageFn.init(e,d,$)}else"full-page-multiple"==l?(d.append(i),StampedWidgetFullPageMultipleFn,StampedWidgetFullPageMultipleFn.init(e,d,$)):"people-highlight"==l?(d.append(i),StampedWidgetPeopleHighlightFn,StampedWidgetPeopleHighlightFn.init(e,d,$)):"drawer"==l?(d.append(i),StampedWidgetDrawerFn,StampedWidgetDrawerFn.init(e,d,$)):"carousel"==l?(d.append(i),StampedCarouselFn,StampedCarouselFn.init(e,d,$)):"carousel-photos"==l?(d.append(i),StampedCarouselPhotosFn,StampedCarouselPhotosFn.init(e.data,d,$)):"carousel-nps"==l?(d.append(i),StampedCarouselNPSFn,StampedCarouselNPSFn.init(e,d,$)):"instagram-feed"==l?(y.stampedInstagramDataArr||p.append(i),StampedInstagramFeedFn,StampedInstagramFeedFn.init(e,d,$)):"site-badge"==l?(d.append(i),StampedSiteBadgeFn,StampedSiteBadgeFn.init(e,d,$)):"top-rated"==l?(d.append(i),StampedTopRatedFn,StampedTopRatedFn.init(e,d,$)):"wall-photos"==l?(d.append(i),StampedWallPhotosFn,StampedWallPhotosFn.init(e,d,$)):"checkout-comments"==l?(d.append(i),StampedCheckoutCommentsFn,StampedCheckoutCommentsFn.init(e,d,$)):"visual-gallery"==l&&(y.stampedVisualGalleryDataArr||p.append(i),StampedVisualGalleryFeedFn,StampedVisualGalleryFeedFn.init(e,d,$))}}})}function h(e,t){if(y.jQuery&&($=y.jQuery),1!=n||t){if(!n&&e)return f(),void(n=!0);if(0==n){if($("#shopify-product-reviews .new-review-form").length)return f(),n=!0,void y.SPR.registerCallbacks();a<10&&setTimeout(function(){h(!1,!0),a++},2e3)}}else f()}function f(){var r,l,c,e,t,h;n||(d(),s()),i(),o(),w(),e=$("#shopify-product-reviews"),t=$("#stamped-review-vote"),h=[],e.length&&t.length&&(r=e.data("id"),n||$("head").append('<style>.spr-review-reportreview {float:left;} #stamped-rating-wrapper:before { content:"Was This Review Helpful? " } #stamped-rating-wrapper{font-size:12px;float:right;} .stamped-thumbs-up,.stamped-thumbs-down { cursor:pointer; }</style>'),$(".spr-review",e).each(function(e,t){l=$(this).attr("id").replace("spr-review-",""),c=$(this).attr("author");var a=m(t);if(a){var i=$(".spr-review-footer",t);if(i.length&&!$("#stamped-rating-wrapper",i).length){var r=$('<div id="stamped-rating-wrapper">');r.html("&nbsp;");var n=$('<a class="stamped-thumbs-up" data-rating="1" data-review-id="'+l+'">'),s=$('<i class="fa fa-thumbs-up"></i>');s.html(" 0"),n.append(s);var o=$('<a class="stamped-thumbs-down" data-rating="-1" data-review-id="'+l+'">'),p=$('<i class="fa fa-thumbs-down"></i>');p.html(" 0"),o.append(p),r.append(n),r.append("<span>&nbsp;&nbsp;&nbsp;</span>"),r.append(o),i.append(r)}var d={author:c,timestamp:a,reviewId:l};h.push(d)}}),$(C).on("click",".stamped-thumbs-up, .stamped-thumbs-down",function(e){var t=$(this).data("review-id"),a=$(this).data("rating"),i=$(this);$.ajax({type:"GET",url:"//stamped.io/api/reviews/vote",crossDomain:!0,data:{shop:Shopify.shop,productId:r,shopifyReviewId:t,vote:a},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(1==e||-1==e){var t=i.find(".fa").html();t=t.replace("&nbsp;","").trim();var a=parseInt(t);i.find(".fa").html("&nbsp; "+(a+e))}}})}),u(r,h)),p()}String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;t++){var a=new RegExp("\\{"+t+"\\}","gi");e=e.replace(a,arguments[t])}return e};var g,$,T="https://stamped.io/api/";C.getElementsByTagName("script"),y.location.hostname;function S(){var e,t=y.location;if($=y.jQuery,/msie/.test(y.navigator.userAgent.toLowerCase())?($.support.cors=!0,e=t.hash.indexOf("?"),-1!==e?t.hash.substring(e):""):t.search,0<$("#stamped-reviews-widget").length){var a=T+"widget/reviews";$("[id=stamped-reviews-widget]").each(function(e){c(a,$(this))})}1==y.stampedExcludeFontAwesome||($("head").append('<link rel="stylesheet" type="text/css" href="//cdn-stamped-io.azureedge.net/files/widget.min.css">'),$("head").append('<style>@media all{.featherlight{display:none;position:fixed;top:0;right:0;bottom:0;left:0;z-index:2147483647;text-align:center;white-space:nowrap;cursor:pointer;background:#333;background:rgba(0,0,0,0)}.featherlight:last-of-type{background:rgba(0,0,0,.8)}.featherlight:before{content:"";display:inline-block;height:100%;vertical-align:middle;margin-right:-.25em}.featherlight .featherlight-content{position:relative;text-align:left;vertical-align:middle;display:inline-block;overflow:auto;padding:25px 25px 0;border-bottom:25px solid transparent;margin-left:5%;margin-right:5%;max-height:95%;background:#fff;cursor:auto;white-space:normal}.featherlight .featherlight-inner{display:block}.featherlight .featherlight-close-icon{position:absolute;z-index:9999;top:0;right:0;line-height:25px;width:25px;cursor:pointer;text-align:center;font-family:Arial,sans-serif;background:#fff;background:rgba(255,255,255,.3);color:#000}.featherlight .featherlight-image{width:100%}.featherlight-iframe .featherlight-content{border-bottom:0;padding:0}.featherlight iframe{border:0}.featherlight *{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}} @media only screen and (max-width:1024px){.featherlight .featherlight-content{margin-left:10px;margin-right:10px;max-height:98%;padding:10px 10px 0;border-bottom:10px solid transparent}} @media all{.featherlight .featherlight-content{padding:0;border:none;min-width:inherit}.featherlight .featherlight-image{max-width:100%;border:20px solid #fff; max-width: 100%;max-height: 100%;width: auto;}}@media only screen and (max-width:1024px){.featherlight .featherlight-content{padding:0;border:none}}</style>'),$("head").append("<style>@media all{.featherlight-next,.featherlight-previous{display:block;position:absolute;top:25px;right:25px;bottom:25px;left:80%;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:rgba(0,0,0,0)}.featherlight-previous{left:25px;right:80%}.featherlight-next:hover,.featherlight-previous:hover{background:rgba(255,255,255,.25)}.featherlight-next span,.featherlight-previous span{display:none;position:absolute;top:50%;left:5%;width:82%;text-align:center;font-size:30px;line-height:80px;margin-top:-40px;color:#fff;font-family:arial;font-style:normal;font-weight:400}.featherlight-next span{right:5%;left:auto}.featherlight-next:hover span,.featherlight-previous:hover span{display:inline-block}.featherlight-loading .featherlight-next,.featherlight-loading .featherlight-previous{display:none}}@media only screen and (max-device-width:1024px){.featherlight-next:hover,.featherlight-previous:hover{background:0 0}.featherlight-next span,.featherlight-previous span{display:block}}@media only screen and (max-width:1024px){.featherlight-next,.featherlight-previous{top:10px;right:10px;left:85%}.featherlight-previous{left:10px;right:85%}.featherlight-next span,.featherlight-previous span{margin-top:-30px;font-size:40px}}</style>")),$("head").append('<style>.spr-review-header-byline { width:100%; } #stamped-reviews-widget[data-widget-type="full-page"]:empty:before { content: "Loading..."; text-align: center; width: 100%; display: block; }</style>'),function(l){function i(e,t){if(!(this instanceof i)){var a=new i(e,t);return a.open(),a}this.id=i.id++,this.setup(e,t),this.chainCallbacks(i._callbackChain)}if(void 0!==l){var r=[],n=function(t){return r=l.grep(r,function(e){return e!==t&&0<e.$instance.closest("body").length})},s={allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,name:1,referrerpolicy:1,scrolling:1,sandbox:1,src:1,srcdoc:1,width:1},a={keyup:"onKeyUp",resize:"onResize"},o=function(e){l.each(i.opened().reverse(),function(){return e.isDefaultPrevented()||!1!==this[a[e.type]](e)?void 0:(e.preventDefault(),e.stopPropagation(),!1)})},p=function(e){if(e!==i._globalHandlerInstalled){i._globalHandlerInstalled=e;var t=l.map(a,function(e,t){return t+"."+i.prototype.namespace}).join(" ");l(y)[e?"on":"off"](t,o)}};i.prototype={constructor:i,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:l.noop,beforeContent:l.noop,beforeClose:l.noop,afterOpen:l.noop,afterContent:l.noop,afterClose:l.noop,onKeyUp:l.noop,onResize:l.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(e,t){"object"!=typeof e||e instanceof l!=0||t||(t=e,e=void 0);var a=l.extend(this,t,{target:e}),i=a.resetCss?a.namespace+"-reset":a.namespace,r=l(a.background||['<div class="'+i+"-loading "+i+'">','<div class="'+i+'-content">','<button class="'+i+"-close-icon "+a.namespace+'-close" aria-label="Close">',a.closeIcon,"</button>",'<div class="'+a.namespace+'-inner">'+a.loading+"</div>","</div>","</div>"].join("")),n="."+a.namespace+"-close"+(a.otherClose?","+a.otherClose:"");return a.$instance=r.clone().addClass(a.variant),a.$instance.on(a.closeTrigger+"."+a.namespace,function(e){var t=l(e.target);("background"===a.closeOnClick&&t.is("."+a.namespace)||"anywhere"===a.closeOnClick||t.closest(n).length)&&(a.close(e),e.preventDefault())}),this},getContent:function(){if(!1!==this.persist&&this.$content)return this.$content;var t=this,e=this.constructor.contentFilters,a=function(e){return t.$currentTarget&&t.$currentTarget.attr(e)},i=a(t.targetAttr),r=t.target||i||"",n=e[t.type];if(!n&&r in e&&(n=e[r],r=t.target&&i),r=r||a("href")||"",!n)for(var s in e)t[s]&&(n=e[s],r=t[s]);if(!n){var o=r;if(r=null,l.each(t.contentFilters,function(){return(n=e[this]).test&&(r=n.test(o)),!r&&n.regex&&o.match&&o.match(n.regex)&&(r=o),!r}),!r)return"console"in y&&y.console.error("Featherlight: no content filter found "+(o?' for "'+o+'"':" (no target specified)")),!1}return n.process.call(t,r)},setContent:function(e){var t=this;return e.is("iframe")&&t.$instance.addClass(t.namespace+"-iframe"),t.$instance.removeClass(t.namespace+"-loading"),t.$instance.find("."+t.namespace+"-inner").not(e).slice(1).remove().end().replaceWith(l.contains(t.$instance[0],e[0])?"":e),t.$content=e.addClass(t.namespace+"-inner"),t},open:function(t){var a=this;if(a.$instance.hide().appendTo(a.root),!(t&&t.isDefaultPrevented()||!1===a.beforeOpen(t))){t&&t.preventDefault();var e=a.getContent();if(e)return r.push(a),p(!0),a.$instance.fadeIn(a.openSpeed),a.beforeContent(t),l.when(e).always(function(e){a.setContent(e),a.afterContent(t)}).then(a.$instance.promise()).done(function(){a.afterOpen(t)})}return a.$instance.detach(),l.Deferred().reject().promise()},close:function(e){var t=this,a=l.Deferred();return!1===t.beforeClose(e)?a.reject():(0===n(t).length&&p(!1),t.$instance.fadeOut(t.closeSpeed,function(){t.$instance.detach(),t.afterClose(e),a.resolve()})),a.promise()},resize:function(e,t){if(e&&t){this.$content.css("width","").css("height","");var a=Math.max(e/(parseInt(this.$content.parent().css("width"),10)-1),t/(parseInt(this.$content.parent().css("height"),10)-1));1<a&&(a=t/Math.floor(t/a),this.$content.css("width",e/a+"px").css("height",t/a+"px"))}},chainCallbacks:function(e){for(var t in e)this[t]=l.proxy(e[t],this,l.proxy(this[t],this))}},l.extend(i,{id:0,autoBind:"[data-featherlight]",defaults:i.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(e){return e instanceof l&&e},process:function(e){return!1!==this.persist?l(e):l(e).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff|bmp|svg)(\?\S*)?$/i,process:function(e){var t=l.Deferred(),a=new Image,i=l('<img src="'+e+'" alt="" class="'+this.namespace+'-image" />');return a.onload=function(){i.naturalWidth=a.width,i.naturalHeight=a.height,t.resolve(i)},a.onerror=function(){t.reject(i)},a.src=e,t.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(e){return l(e)}},ajax:{regex:/./,process:function(e){var a=l.Deferred(),i=l("<div></div>").load(e,function(e,t){"error"!==t&&a.resolve(i.contents()),a.fail()});return a.promise()}},iframe:{process:function(e){var t=new l.Deferred,a=l("<iframe/>"),i=function(e,t){var a={},i=new RegExp("^"+t+"([A-Z])(.*)");for(var r in e){var n=r.match(i);n&&(a[(n[1]+n[2].replace(/([A-Z])/g,"-$1")).toLowerCase()]=e[r])}return a}(this,"iframe"),r=function(e,t){var a={};for(var i in e)i in t&&(a[i]=e[i],delete e[i]);return a}(i,s);return a.hide().attr("src",e).attr(r).css(i).on("load",function(){t.resolve(a.show())}).appendTo(this.$instance.find("."+this.namespace+"-content")),t.promise()}},text:{process:function(e){return l("<div>",{text:e})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(e,t){var i=this,r=new RegExp("^data-"+t+"-(.*)"),n={};return e&&e.attributes&&l.each(e.attributes,function(){var e=this.name.match(r);if(e){var t=this.value,a=l.camelCase(e[1]);if(0<=l.inArray(a,i.functionAttributes))t=new Function(t);else try{t=JSON.parse(t)}catch(e){}n[a]=t}}),n},extend:function(e,t){var a=function(){this.constructor=e};return a.prototype=this.prototype,e.prototype=new a,e.__super__=this.prototype,l.extend(e,this,t),e.defaults=e.prototype,e},attach:function(r,n,s){var o=this;"object"!=typeof n||n instanceof l!=0||s||(s=n,n=void 0);var p,e=(s=l.extend({},s)).namespace||o.defaults.namespace,d=l.extend({},o.defaults,o.readElementConfig(r[0],e),s),t=function(e){var t=l(e.currentTarget),a=l.extend({$source:r,$currentTarget:t},o.readElementConfig(r[0],d.namespace),o.readElementConfig(e.currentTarget,d.namespace),s),i=p||t.data("featherlight-persisted")||new o(n,a);"shared"===i.persist?p=i:!1!==i.persist&&t.data("featherlight-persisted",i),a.$currentTarget.blur&&a.$currentTarget.blur(),i.open(e)};return r.on(d.openTrigger+"."+d.namespace,d.filter,t),t},current:function(){var e=this.opened();return e[e.length-1]||null},opened:function(){var t=this;return n(),l.grep(r,function(e){return e instanceof t})},close:function(e){var t=this.current();return t?t.close(e):void 0},_onReady:function(){var t=this;t.autoBind&&(l(t.autoBind).each(function(){t.attach(l(this))}),l(C).on("click",t.autoBind,function(e){e.isDefaultPrevented()||t.attach(l(e.currentTarget))(e)}))},_callbackChain:{onKeyUp:function(e,t){return 27===t.keyCode?(this.closeOnEsc&&l.featherlight.close(t),!1):e(t)},beforeOpen:function(e,t){return this._previouslyActive=C.activeElement,this._$previouslyTabbable=l("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button")),this._$previouslyWithTabIndex=l("[tabindex]").not('[tabindex="-1"]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map(function(e,t){return l(t).attr("tabindex")}),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1),C.activeElement.blur&&C.activeElement.blur(),e(t)},afterClose:function(e,t){var a=e(t),i=this;return this._$previouslyTabbable.removeAttr("tabindex"),this._$previouslyWithTabIndex.each(function(e,t){l(t).attr("tabindex",i._previousWithTabIndices[e])}),this._previouslyActive.focus(),a},onResize:function(e,t){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),e(t)},afterContent:function(e,t){var a=e(t);return this.$instance.find("[autofocus]:not([disabled])").focus(),this.onResize(t),a}}}),l.featherlight=i,l.fn.featherlight=function(e,t){return i.attach(this,e,t),this},l(C).ready(function(){i._onReady()})}else"console"in y&&y.console.info("Too much lightness, Featherlight needs jQuery.")}(jQuery),function(n){function i(e,t){if(!(this instanceof i)){var a=new i(n.extend({$source:e,$currentTarget:e.first()},t));return a.open(),a}n.featherlight.apply(this,arguments),this.chainCallbacks(o)}var e=function(e){y.console&&y.console.warn&&y.console.warn("FeatherlightGallery: "+e)};if(void 0===n)return e("Too much lightness, Featherlight needs jQuery.");if(!n.featherlight)return e("Load the featherlight plugin before the gallery plugin");var t="ontouchstart"in y||y.DocumentTouch&&C instanceof DocumentTouch,a=n.event&&n.event.special.swipeleft&&n,r=y.Hammer&&function(e){var t=new y.Hammer.Manager(e[0]);return t.add(new y.Hammer.Swipe),t},s=t&&(a||r);t&&!s&&e("No compatible swipe library detected; one must be included before featherlightGallery for swipe motions to navigate the galleries.");var o={afterClose:function(e,t){var a=this;return a.$instance.off("next."+a.namespace+" previous."+a.namespace),a._swiper&&(a._swiper.off("swipeleft",a._swipeleft).off("swiperight",a._swiperight),a._swiper=null),e(t)},beforeOpen:function(e,t){var a=this;return a.$instance.on("next."+a.namespace+" previous."+a.namespace,function(e){var t="next"===e.type?1:-1;a.navigateTo(a.currentNavigation()+t)}),s&&(a._swiper=s(a.$instance).on("swipeleft",a._swipeleft=function(){a.$instance.trigger("next")}).on("swiperight",a._swiperight=function(){a.$instance.trigger("previous")}),a.$instance.addClass(this.namespace+"-swipe-aware",s)),a.$instance.find("."+a.namespace+"-content").append(a.createNavigation("previous")).append(a.createNavigation("next")),e(t)},beforeContent:function(e,t){var a=this.currentNavigation(),i=this.slides().length;return this.$instance.toggleClass(this.namespace+"-first-slide",0===a).toggleClass(this.namespace+"-last-slide",a===i-1),e(t)},onKeyUp:function(e,t){var a={37:"previous",39:"next"}[t.keyCode];return a?(this.$instance.trigger(a),!1):e(t)}};n.featherlight.extend(i,{autoBind:"[data-featherlight-gallery]"}),n.extend(i.prototype,{previousIcon:"&#9664;",nextIcon:"&#9654;",galleryFadeIn:100,galleryFadeOut:300,slides:function(){return this.filter?this.$source.find(this.filter):this.$source},images:function(){return e("images is deprecated, please use slides instead"),this.slides()},currentNavigation:function(){return this.slides().index(this.$currentTarget)},navigateTo:function(e){var t=this,a=t.slides(),i=a.length,r=t.$instance.find("."+t.namespace+"-inner");return e=(e%i+i)%i,t.$currentTarget=a.eq(e),t.beforeContent(),n.when(t.getContent(),r.fadeTo(t.galleryFadeOut,.2)).always(function(e){t.setContent(e),t.afterContent(),e.fadeTo(t.galleryFadeIn,1)})},createNavigation:function(e){var t=this;return n('<span title="'+e+'" class="'+this.namespace+"-"+e+'"><span>'+this[e+"Icon"]+"</span ></span > ").click(function(){n(this).trigger(e+"."+t.namespace)})}}),n.featherlightGallery=i,n.fn.featherlightGallery=function(e){return i.attach(this,e),this},n(C).ready(function(){i._onReady()})}(jQuery);h(!($.featherlight.defaults.afterOpen=function(e){var t=$(this.$source[0]),a=$(this.$instance[0]);if("#stamped-modal-new"==this.$currentTarget.attr("data-featherlight")){var i=t.closest(".stamped-review-card"),r=$("#stamped-modal-new",a),n=$(".stamped-modal-photo",r),s=$(".stamped-modal-photo > .stamped-modal-photo-bg",r),o=$(".stamped-modal-review-date",r),p=$(".stamped-modal-review-rating",r),d=$(".stamped-modal-review-title",r),l=$(".stamped-modal-review-body",r),c=$(".stamped-modal-review-author",r),h=$(".stamped-modal-review-product a",r),u=$(".stamped-modal-review-share",r),m=$(".stamped-modal-review-vote",r);o.html($(".stamped-reviews-date",i).html()),p.html($(".stamped-reviews-rating",i).html()),d.html($(".stamped-reviews-title",i).html()),l.html($(".stamped-reviews-message",i).html()),c.html($(".stamped-reviews-author",i).html()),h.attr("href",$(".stamped-reviews-product",i).attr("href")).html($(".stamped-reviews-product",i).html()),m.html($(".stamped-reviews-vote",i).html());var f=[];$(".stamped-reviews-message-image-block a",i).each(function(){f.push($(this).attr("href"))});var g=t.attr("href"),v=f.indexOf(g),w=f[v];s.css("background-image","url("+w+")"),1<f.length&&($(".stamped-modal-photo-arrow-right, .stamped-modal-photo-arrow-left",n).show(),$(".stamped-modal-photo-arrow-right, .stamped-modal-photo-arrow-left",n).on("click",function(){"left"==$(this).attr("data-dir")?v--:v++,(v<=0||v>f.length-1)&&(v=0);var e=f[v];s.css("background-image","url("+e+")")}));var y=$(".stamped-reviews-rating .fa-star",i).length,b=l.html(),x=$(".stamped-reviews-product",i).attr("href"),k=$(".stamped-reviews-title",i).text();if(x){var C="https://www.facebook.com/dialog/feed?app_id=222664514734026&caption="+F("★",y)+"&description="+encodeURIComponent(b)+"&display=popup&link="+encodeURIComponent(x)+"&name="+encodeURIComponent(k)+"&redirect_uri=https://stamped.io/shares?productId=",T="https://twitter.com/intent/tweet?text="+b.substr(0,140)+"&url="+encodeURIComponent(x),S="https://plus.google.com/share?url="+encodeURIComponent(x);$("<a>").text("Facebook").attr("href",C).attr("target","_blank").appendTo(u),$("<a>").text("Twitter").attr("href",T).attr("target","_blank").appendTo(u),$("<a>").text("Google").attr("href",S).attr("target","_blank").appendTo(u)}}}))}return function(e){if(y.location.hash)return 1==y.location.hash.indexOf(e)||-1!=y.location.hash.indexOf(e)}("answers")&&(v=!0),y.jQuery?setTimeout(function(){S()},2e3):((g=C.createElement("script")).type="text/javascript",g.charset="UTF-8",g.src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js",C.body.appendChild(g),g.onload=g.onreadystatechange=S),{createBadgesLink:d,createWidgetReviewsImages:i,createWidgetReviewsShare:o,createWidgetQuestionsAndAnswers:s,createWidgetReviewsAvatar:w,createWidgetReviewOptions:p,toggleForm:function(e){"review"==e?($('.spr-form[data-type="questions"]').hide(),$('.spr-form[data-type="reviews"]').toggle()):($('.spr-form[data-type="questions"] .spr-form-message-success').hide(),$("#new-question-form").show(),$('.spr-form[data-type="reviews"]').hide(),$('.spr-form[data-type="questions"]').toggle())},submitQuestionForm:function(){var e=$("#new-question-form"),t=$("#stamped-main-widget");if(e.length&&t.length){var a=t.data("name"),i=t.data("description"),r=t.data("url"),n=t.data("image-url"),s=e.serializeArray();s.push({name:"productName",value:a}),s.push({name:"productDescription",value:i}),s.push({name:"productUrl",value:r}),s.push({name:"productImageUrl",value:n}),$.ajax({type:"POST",url:"//stamped.io/api/questions",data:$.param(s),crossDomain:!0,success:function(e){e.a&&($("#new-question-form").hide(),$('.spr-form[data-type="questions"] .spr-form-message-success').show(),$("#new-question-form")[0].reset())}})}},createAllWidgets:h,pageQuestions:function(e){var t=$("#shopify-product-reviews").data("id");l($(e).data("page"),t)},pageWidget:function(e){$("#shopify-product-reviews").data("id");var t=$(e).data("page"),a=T+"widget/reviews",i=$(e).closest("#stamped-reviews-widget");i.attr("data-page",t),c(a,i,t)},openUGCModal:function(g,e,t,a,i,v){var w,y;1!=a&&a||(g=function(e,t){for(var a=[],i=0;i<e.length;i++){var r=e[i];if(1!=t||r.reviewUserPhotos){var n={photos:[],name:r.author,via:"Photos",title:r.reviewTitle,body:r.reviewMessage,date:r.reviewDate,dateFull:r.dateCreated,verifiedType:r.reviewVerifiedType,rating:r.reviewRating,products:[{url:r.productUrl,title:r.productName,imageUrl:r.productImageUrl}]};if(r.reviewUserPhotos)for(var s=r.reviewUserPhotos.split(","),o=0;o<s.length;o++)n.photos.push({imageUrl:"//s3-us-west-2.amazonaws.com/stamped.io/uploads/photos/"+s[o],imageThumbnailUrl:"//s3-us-west-2.amazonaws.com/stamped.io/uploads/photos/thumb/"+s[o]});else n.photos.push({imageUrl:r.productImageLargeUrl,imageThumbnailUrl:r.productImageUrl});a.push(n)}}return a}(g,i)),$(t).attr("data-hover-text"),$(t).attr("data-shop-button-text");var r,b=$(t).attr("data-url-param")||"";$(t).attr("data-cropped"),$(t).attr("data-page"),$(t).attr("data-take"),$("#stamped-ugc-modal").length||(w=$('<div class="stamped-ugc-modal"> <div class="stamped-ugc-modal-wrapper"> <a title="Close" class="stamped-modal-close">X</a> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-previous" data-direction="left"><i class="fa fa-angle-left"></i></div> <div class="stamped-ugc-modal-image-wrapper"> <div class="stamped-ugc-modal-image"> </div> <ul> </ul> </div> <div class="stamped-ugc-modal-content"> <div class="stamped-ugc-modal-content-wrapper"> <div class="stamped-ugc-modal-user"> <div class="stamped-ugc-modal-user-username"></div><div class="stamped-ugc-modal-user-source"></div> </div> <div class="stamped-ugc-modal-tags"> <a {0}> <img {1} class="stamped-ugc-modal-tags-product-image"> <div class="stamped-ugc-modal-tags-product-title">{2}</div> <div class="stamped-ugc-modal-tags-button"></div> </a> </div><div class="stamped-ugc-modal-caption"></div>  </div> </div> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-next" data-direction="right"><i class="fa fa-angle-right"></i></div> <div class="stamped-ugc-modal-list-photos"> <ul></ul> </div> </div>'),$(w).appendTo(C.body));var n="",s=g.length;y||(y=$(".stamped-ugc-modal-tags:first",w).html());for(var o=g?g.length:0,p=0;p<s;p++){var d=g[p].imageUrl;d&&(n+=templateBlock.format(o,d),o++)}if($(".stamped-ugc-media-block-template",t).append(n),$(t).keydown(function(e){if(37==e.keyCode)u("left");else{if(39!=e.keyCode)return;u("right")}}),!r){$(C).on("click",".stamped-modal-close, .stamped-ugc-modal.open",function(e){e.target==this&&(w.remove(),$("body").removeClass("stamped-modal-open"))}),w.on("click",".stamped-ugc-modal-nav-previous, .stamped-ugc-modal-nav-next",function(e){var t=$(this).attr("data-direction");u(t)}),C.addEventListener("touchstart",function(e){l=e.touches[0].clientX,c=e.touches[0].clientY},!1),C.addEventListener("touchmove",function(e){if(l&&c){var t=e.touches[0].clientX,a=e.touches[0].clientY,i=l-t,r=c-a;Math.abs(i)>Math.abs(r)&&u(0<i?"right":"left"),c=l=null}},!1);var l=null,c=null}r=!0;var x=function(){var e=Number($(this).text())+1,t=$(this).data("image-url");$(".stamped-ugc-modal-image-wrapper ul li").removeClass("active"),$(".stamped-ugc-modal-image-wrapper ul li:nth-child("+e+")").addClass("active"),$(".stamped-ugc-modal-image",w).css("background-image",'url("'+t+'")')},k=function(){var e=$(this).data("index-review"),t=$(this).data("index-photo");$(".stamped-ugc-modal-list-photos ul li").removeClass("active"),$(".stamped-ugc-modal-list-photos ul li[data-index-review="+e+"][data-index-photo="+t+"]").addClass("active"),h(e,t)},h=function(e,t){var a=g[e];if(null!=a&&null!=a.photos){if(null!=t?(v=t)>a.photos.length-1&&(v=0):v?v>a.photos.length-1&&(v=0):v=0,!$(".stamped-ugc-modal-list-photos ul li",w).length)for(var i=0;i<g.length;i++)for(var r=0;r<g[i].photos.length;r++){var n=e==i?"active":"",s=(g[i].photos[r].imageUrl,g[i].photos[r].imageThumbnailUrl);(d=C.createElement("li")).className=n,d.innerHTML="",(l=C.createAttribute("data-index-review")).value=i,d.setAttributeNode(l),(l=C.createAttribute("data-index-photo")).value=r,d.setAttributeNode(l),d.style.background="url("+s+")",$(".stamped-ugc-modal-list-photos ul",w).append(d),d.onclick=k}if(null!=a.photos[v]){var o=a.photos[v].imageUrl;$(".stamped-ugc-modal-image",w).fadeOut("",function(){$(".stamped-ugc-modal-image",w).css("background-image",'url("'+o+'")'),$(this).fadeIn()})}$(".stamped-ugc-modal-image-wrapper ul",w).html("");for(var p=0;p<a.photos.length;p++){var d,l;n=p==v?"active":"",(d=C.createElement("li")).className=n,d.innerHTML=p,(l=C.createAttribute("data-image-url")).value=a.photos[p].imageUrl,d.setAttributeNode(l),$(".stamped-ugc-modal-image-wrapper ul",w).append(d),d.onclick=x}var c;$(".stamped-ugc-modal-user-source").text("via "+a.via),c=a.dateFull?new Date(a.dateFull):new Date(a.date),$(".stamped-ugc-modal-user-username",w).text(a.name),$(".stamped-ugc-modal-user-username",w).attr("data-verified-type",a.verifiedType);var h="";if(a.rating){for(var u=0;u<a.rating;u++)h+='<i class="fa fa-star"></i>';for(u=0;u<5-a.rating;u++)h+='<i class="fa fa-star-o"></i>'}$(".stamped-ugc-modal-caption",w).html('<div class="stamped-ugc-modal-date">'+(new timeago).format(c)+'</div><div class="stamped-ugc-modal-caption-rating">'+h+'</div><div class="stamped-ugc-modal-caption-title">'+a.title+"</div> "+a.body),$(".stamped-ugc-modal-tags",w).html("");for(var m=0;m<a.products.length;m++){var f=a.products[m];b&&(f.url=f.url+"?param="+b),f.imageUrl?$(".stamped-ugc-modal-tags",w).append(y.format('href="'+f.url+'"','src="'+f.imageUrl+'"',f.title)):$(".stamped-ugc-modal-tags",w).append(y.format('href="'+f.url+'"',"",f.title))}w.hasClass("open")||(w.addClass("open"),$("body").addClass("stamped-modal-open")),w.attr("data-review-index",e),w.attr("data-photo-index",v)}},u=function(e){if(w.hasClass("open"))if(w.attr("data-review-index"),w.attr("data-photo-index"),"left"==e)$(".stamped-ugc-modal-list-photos ul li.active").prev().click();else{if("right"!=e)return;$(".stamped-ugc-modal-list-photos ul li.active").next().click()}};h(e)},loadBadges:function(){}}}(window,document);if(void 0!==Shopify.Checkout&&"thank_you"==Shopify.Checkout.page){var d=new Date,n=d.getTime(),aContainer=document.createElement("div");aContainer.setAttribute("id","second"),aContainer.innerHTML="<img src='http://stamped.io/conversion_tracking.gif?shopShopifyDomain="+Shopify.shop+"&orderId="+Shopify.checkout.order_id+"&orderAmount="+Shopify.checkout.total_price+"&orderCurrency="+Shopify.checkout.currency+"&ts="+n+"'/>",document.body.appendChild(aContainer)}